## Deadlock (교착 상태)

### Deadlock이란?

두 개 이상의 프로세스가 같은 프로세스의 자원을 무한히 기다리게 되는 상황이다.
멀티프로세스, 멀티스레드 환경에서 발생할 수 있다.

### 발생 조건

조건 4가지가 모두 만족하는 경우 발생 (?)

1. 상호 배제
   한번에 한 프로세스만 해당 자원에 접근할 수 있음
2. 점유 대기
   자원을 최소 1개 보유, 다른 프로세스에 할당된 자원을 점유하기 위해 대기하는 프로세스 존재
3. 비선점
   이미 할당된 자원을 강제로 빼앗을 수 없음
4. 순환 대기
   대기 프로세스의 집합이 순환 형태로 자원을 대기

### 해결방법

1. 예방
   발생 조건 4가지 중 하나라도 발생하지 않도록 함
   - 상호 배제 - 한 번에 여러 프로세스가 공유 자원을 사용할 수 있게함
   - 점유 대기 - 필요한 모든 자원을 한 번에 요구하고, 허용할 때까지 작업을 보류
   - 비선점 - 더 높은 우선순위의 프로세스가 해당 자원을 선점할 수 있게함
   - 순환 대기 - 자원이 순환 형태로 대기하지 않도록 한쪽 방향으로만 자원을 요청하게함
2. 회피

   - `Safe State`: 프로세스들이 요청하는 모든 자원을, 데드락을 발생시키지 않으면서도 차례로 모두에게 할당해줄 수 있는 상태
   - `Safe Sequence`: 특정 순서로 프로세스에게 자원을 할당해 줄 때 데드락이 발생하지 않는 순서
   - `은행원 알고리즘`

3. 탐지, 회복
   - `탐지`: 데드락이 발생 여부 탐색. 현재 시스템의 자원 할당 상태를 통해 파악
   - `회복`: (1)프로세스를 1개 이상 중단시키기 (2)자원 선점하기

#### 참고 자료

https://chanhuiseok.github.io/posts/cs-2/

찾아볼 것

- 은행원 알고리즘
- 멀티스레드 환경에서 데드락 발생과 해결방법 (코드로 참고하기)
