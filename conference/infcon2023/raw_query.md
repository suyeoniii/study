## Raw Query 리팩토링을 통한 주니어 개발자의 성장 이야기

### 영속성 레이어 추가

- 서비스 레이어에 존재하던 로우 쿼리를 영속성 레이어를 만들어서 옮겨줌

### 동일한 쿼리 중복 사용

- 동일한 쿼리를 여러 군데에서 복사하여 사용하고 있음 - 가독성, 유지보수성 낮음
- 공통된 부분을 뷰로 구성함
- 공통으로 select 하던 부분을 뷰를 조회하도록 바꾸고 where, 정렬 조건만 인자로 받아오게함

쿼리 성능 측정 툴 - wrk2

### TypeORM

- 영속성 컨텍스트를 어디서 관리할까? → entity manager
- query runner - conection pool에서 연결을 가져옴
- connection pool을 지원하지 않는다면 하나의 연결을 전체적으로 사용

### 리팩토링하며 아쉬웠던 점

- prepared statement 미사용 부분 존재
- 테스트코드 X
