## 낙관적 잠금 (Optimistic Locking), 비관적 잠금 (Pessimistic Locking)

### 사용 이유

- 여러 트랜잭션이 동시에 같은 데이터에 업데이트를 발생시킬 경우 일부 요청이 유실되는 현상 발생 가능
- 1번 유저가 업데이트하려고 조회 -> 2번 유저가 값 변경 -> 1번 유저는 2번 유저가 쓰기 전 값을 가지고 있음

### 낙관적 잠금

데이터 갱신 시 충돌이 발생하지 않을 것이라고 낙관적으로 보고 잠금을 거는 기법

- 여러 업데이트가 서로 간섭하지 않도록 방지하는 방법 사용
- version 속성으로 엔티티의 변경사항 감지
- Entity 내부에 @Version 어노테이션이 붙은 Int, Long 변수 구현
- 엔티티에는 1개의 버전 속성만 있어야함
- Select시 트랜잭션 내부에 버전 속성 값 보유, 트랜잭션 업데이트 전 버전 속성 재확인
- -> 그동안 버전 정보가 변경되면 `OptimisticLockException` 발생
- -> 버전정보 변경이 없으면 버전속성 증가

#### 사용 방법

TODO

### 비관적 잠금

트랜잭션 충돌이 발생한다고 가정하고 우선 락을 걸고 보는 방법

#### 사용 방법

TODO

#### 참고자료

link
