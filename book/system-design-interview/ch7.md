## 7. 분산 시스템을 위한 유일 ID 생성기

- 유일 ID 생성에 `auto_increment`를 사용하는건 분산 시스템에서는 불가능

### 1. 문제 이해 및 설계 범위 확정

요구사항

- ID는 유일해야한다
- ID는 숫자로만 구성되어야한다
- ID는 64비트로 표현될 수 있는 값이어야한다
- ID는 발급 날짜에 따라 정렬 가능해야한다
- 초당 10000개의 ID를 발급할 수 있어야한다

### 2. 개략적 설계안 제시 및 동의 구하기

1. 다중 마스터 복제
   - 데이터베이스의 auto_increment 기능 활용
   - 다음 ID의 값을 구할 때 1대신 K만큼 증가시킴
   - K는 현재 사용중인 데이터베이스 서버의 수
2. UUID
   - 유일성이 보장되는 ID를 만드는 간단한 방법
   - 서버 간 조율없이 독립적으로 생성 가능
   - 단점: 128비트로 너무 길다
   - 단점: 숫자로만 구성되어야 한다는 요구사항을 만족하지 못함
   - 단점: 발급 날짜에 따라 정렬이 불가능
3. 티켓 서버
   - 티켓 서버를 중앙 집중형으로 하나만 사용
   - 유일성이 보장되는 ID를 쉽게 만들 수 있음
   - 티켓 서버가 SPOF (Single Point of Failure)가 될 수 있음
4. 트위터 스노플레이크
   - TODO: 이미지
   - 사인 비트
   - 타임스탬프
   - 데이터센터 ID
   - 서버 ID
   - 일련번호

### 3. 상세 설계

- 트위터 스노플레이크 접근법
- TODO: 이미지
- 타임스탬프

### 4. 마무리

- 시계 동기화
- 각 section 길이 최적화
- 고가용성
