# 27장: '크고 작은 모든' 서비스들

---

### 서비스아키텍처를 사용하면, 독립적으로 개발, 배포, 운영할 수 있을까?

#### 결합 분리의 오류

서비스로 분리되면, 결합이 분리될 것이라 생각한다. 하지만 프로세서 또는 네트워크 상의 공유 자원 때문에 결합될 가능성이 있다.
예를 들어 서비스 사이에 오가는 데이터 레코드에 필드가 추가되면, 이 필드를 사용하는 모든 서비스는 변경되어야한다.

#### 개발 및 배포 독립성의 오류

팀별로 서비스를 작성, 유지보수, 운영하며 개발 및 배포독립성은 확장 가능한 것으로 간주된다.
서비스 작성, 개발, 유지보수, 운영이 독립적인 팀 단위로 분리될 수 있다고 생각하게 된다.
하지만, 서비스기반 시스템 이외에 모놀리틱 시스템, 컴포넌트 시스템으로도 구축될 수 있으며
'결합 분리 오류'에 따라 항상 독립적으로 개발, 배포, 운영할 수 있지 않다.

### 횡단 관심사

예를들어 택시서비스에 야옹이 배달 서비스를 구축하는데, 특정 업체, 운전자 또는 고객은 여러 이유로 제외되어야한다.
기존에 택시 서비스가 구축되어있던 상황에서 야옹이 배달 서비스를 추가하려면 어떻게 해야할까?
택시 찾기, 택시 선택, 택시 매칭, 택시 공급, 택시 UI 등에 해당하는 모든 부분을 수정해야한다.
서비스들이 모두 결합되어있기 때문이다. 이는 횡단 관심사가 지닌 문제이다.

#### 컴포넌트 기반 문제 해결

Rides, Kittens 컴포넌트로 나뉘고, 두 컴포넌트는 기존 컴포넌트에 있는 추상 기반 클래스를 템플릿 메서드나 전략 패턴 등을 이용하여 오버라이드한다.
이 전략을 따른다면, 택시 UI는 바뀌어야하지만, 그 외의 것들은 변경할 필요없이 새로운 jar파일을 추가하고 런타임에 동적으로 로드하면 된다.
따라서 야옹이 기능은 결합이 분리되며, 독립적으로 개발, 배포할 수 있다.

### 결론

- 서비스 그 자체는 아키텍처에 중요한 요소는 아니다.
- 시스템 아키텍처는 시스템 내부의 경계와 경계를 넘나드는 의존성에 의해 정의된다.
- 서비스는 단일 컴포넌트로 만들 수도 있고, 다수의 컴포넌트로 구성할 수도 있다.
