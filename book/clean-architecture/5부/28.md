# 28장: 테스트 경계

---

### 시스템 컴포넌트인 테스트

테스트는 의존성 규칙에 따른다. 테스트 대상이 되는 코드에 의존하고, 반대로 실제 코드는 테스트에 의존하지 않고, 사용자에게 직접적인 영향을 미치지 않는다.
테스트는 다른 시스템 컴포넌트가 지켜야 하는 모델을 표현해준다.

### 테스트를 고려한 설계

테스트는 독립적으로 배포할 수 있기때문에 시스템 설계 범위 밖이라고 생각하기 쉽다.
하지만 테스트가 시스템과 잘 통합되지 않으면 테스트는 깨지기 쉬워지고 시스템은 변경하기 어려워진다.
시스템의 변경사항으로 인해 많은 테스트가 깨질 수 있고, 이 때문에 시스템을 변경하기 꺼리기 때문에 시스템은 변경하기 어려워진다.

이를 해결하기 위해서는 테스트를 고려한 설계가 필요하다. 변동성이 큰 것에 의존하면 안된다. 예를들어 GUI는 변동성이 크다. GUI대신 업무 규칙을 테스트할 수 있어야한다.

### 테스트 API

테스트가 업무 규칙을 검증하는데 사용할 수 있도록 특화된 API를 만들면 된다.
테스트 API는 테스트를 어플리케이션으로부터 분리할 목적으로 사용된다.

만약 테스트가 특정 클래스 등에 의존하고 있다면 클래스를 수정할 때마다 테스트는 변경되어야 할 것이다. (구조적 결합)
테스트 API는 이런 어플리케이션의 구조를 테스트가 모르게 함으로써 기존 코드를 수정하더라도 테스트에 영향을 주지 않을 수 있다.

### 결론

테스트는 시스템 외부에 있는 것이 아닌, 시스템의 일부이다. 테스트를 시스템의 일부로 잘 설계하지 않으면 테스트는 쉽게 깨지고 유지보수하기 어려워진다.
